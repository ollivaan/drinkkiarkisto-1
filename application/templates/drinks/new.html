{% extends "layout.html" %}
{% block body %}
<form method="POST" action="{{ url_for('drinks_create') }}">
  {{form.ingredientsAmount}}

  <div class="form-row">
    <div class="form-group col-md-4">
      <label for="name">{{form.name.label}}</label>
      {{form.name(class_="form-control")}}
    </div>
  </div>
  {% if form.name.errors|length > 0 %}
  <div class="form-row">
    <div class="alert alert-danger col-md-4">
      <ul>
        {% for error in form.name.errors %}
        <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  {% endif %}

  <div id="ingredientsWrapper">
    <div class="form-row" id="selectGroup">
      <div class="form-group col-xs-2">
        <label for="amount">{{form.amount.label}}</label>
        {{form.amount(class_="form-control")}}
      </div>
      <div class="form-group col-xs-5">
        <label for="ingredients">{{form.ingredients.label}}</label>
        {{form.ingredients(class_="form-control",name_="ingredients[]")}}
      </div>
    </div>
  </div>

  <div class="form-row">
    <button class="btn btn-primary" onclick="createInput()">Lis채채 aineosia</button>
  </div>

  <div class="form-row">
    <div class="form-group col-md-5">
      <label for="keywords">{{form.keywords.label}}</label>
      {{form.keywords}}
    </div>
  </div>
  <br>
  <input type="submit" value="Lis채채 drinkki" class="btn btn-success" />
</form>

{% block javascript %}
<script type="text/javascript">
  var amount = 0; 
  function createInput() {
    amount++;
    console.log(amount)
    var cloned = $("#selectGroup").clone();
    cloned.attr("id", "");
    cloned.find("select").attr("id", "ingredients-" + amount).attr("name", "ingredients-" + (amount));
    cloned.find("input").attr("id", "amount-" + amount).attr("name", "amount-" + amount);
    cloned.appendTo("#ingredientsWrapper");
    $("#ingredientsAmount")[0].value = amount;
  }

  for (var i = 0; i < 2; i++) {
    createInput();
  }
</script>
{%endblock%}
{% endblock %}